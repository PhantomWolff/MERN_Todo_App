"use strict";

var _csvtojson = _interopRequireDefault(require("csvtojson"));

var _removeMakeDirectories = _interopRequireDefault(require("./removeMakeDirectories"));

var _csvObject = _interopRequireDefault(require("./csvObject"));

var _readSvg = _interopRequireDefault(require("./readSvg"));

var _optimizeSvg = _interopRequireDefault(require("./optimizeSvg"));

var _writeSvg = _interopRequireDefault(require("./writeSvg"));

var _config = require("../config");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable import/no-extraneous-dependencies */

/* eslint-enable import/no-extraneous-dependencies */
(0, _removeMakeDirectories.default)();
var csvHeaders = ['name', 'filepath', 'themeable', 'bidi']; // Parse the csv file to json

(0, _csvtojson.default)({
  noheader: true,
  headers: csvHeaders
}).fromFile(_config.TerraIcon.csvFile).subscribe(function (jsonObj) {
  var csvObject = new _csvObject.default(jsonObj.name, jsonObj.filepath, jsonObj.themeable, jsonObj.bidi);
  (0, _readSvg.default)(csvObject).then(_optimizeSvg.default).then(_writeSvg.default) // eslint-disable-next-line no-console
  .catch(console.error);
});