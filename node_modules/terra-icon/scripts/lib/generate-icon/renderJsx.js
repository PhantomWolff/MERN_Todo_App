"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _template = _interopRequireDefault(require("lodash/template"));

var _fs = _interopRequireDefault(require("fs"));

var _path = _interopRequireDefault(require("path"));

var _ReactIcon = _interopRequireDefault(require("./ReactIcon"));

var _iconData = _interopRequireDefault(require("../../../src/icon-data.json"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable import/no-extraneous-dependencies, compat/compat */

/* eslint-enable import/no-extraneous-dependencies */
var staticIconTemplatePath = _path.default.join(__dirname, './staticIcontemplate.txt');

var themeIconTemplatePath = _path.default.join(__dirname, './template.txt'); // Generate list of static color icon names


var staticIcons = _iconData.default.filter(function (icon) {
  return !icon.themeable && !icon.deprecated;
}).map(function (icon) {
  return icon.componentName;
});
/**
 * generateJsx - Takes an Icon object as input and returns a React component
 * @param {object} icon Icon object that stores svg attributes, children, and name
 */


var renderJsx = function renderJsx(icon) {
  return new Promise(function (resolve, reject) {
    if (staticIcons.includes(icon.name)) {
      _fs.default.readFile(staticIconTemplatePath, 'utf-8', function (error, text) {
        if (error) {
          reject(error);
        } else {
          var compiled = (0, _template.default)(text);
          resolve(new _ReactIcon.default(icon.name, compiled({
            icon: icon
          })));
        }
      });
    } else {
      _fs.default.readFile(themeIconTemplatePath, 'utf-8', function (error, text) {
        if (error) {
          reject(error);
        } else {
          var compiled = (0, _template.default)(text);
          resolve(new _ReactIcon.default(icon.name, compiled({
            icon: icon
          })));
        }
      });
    }
  });
};

var _default = renderJsx;
/* eslint-enable compat/compat */

exports.default = _default;